### TCP / IPの階層モデル

- TCP / IP(*Transmission Control Protocol / Internet Protocol*)とは  
現在のインターネット通信およびイントラネット通信において最も利用されている通信プロトコル。TCP / IPは複数のプロトコルからなるが、中心的な役割を果たすのがTCPとIPであることからTCP / IPと呼ばれるようになった

- TCP / IPの階層モデル  
TCP / IPにおける階層モデルは4階層から構成されている。アプリケーション層・トランスポート層・インターネット層・ネットワークインターフェース層の4つ。ネットワークインターフェース層は単にネットワークアクセス層とも呼ばれている

<img width="600" alt="" src="./images/階層モデル.png">

- 各階層における役割  
・アプリケーション層(TCP / IPプロトコルスタック)  
主に`アプリケーションごとの固有`の規定。HTTP・FTP・SMTP・SSHなどの`アプリケーション層のプロトコル`により、通信アプリケーションの機能が実現される<br><br>
・トランスポート層  
主に`ノード間のデータ転送の信頼性を確保する`ための規定。`TCPまたはUDPのプロトコル`を使用する。TCPを使用する場合は信頼性の高い通信を実現し、UDPを使用する場合は信頼性ではなく効率重視のデータ転送を実現することになる<br><br>
・インターネット層  
主に`ネットワーク間のエンドツーエンドの通信`のための規定。IPが代表的なプロトコル。IPにより、ネットワーク上のノードに対し自分の位置情報となる論理アドレス(IPアドレス)を割り当てられるのでエンドツーエンドの通信を実現する<br><br>
・ネットワークインターフェイス層  
主に`直接的に接続されたノード間の通信`のための規定。LANプロトコルはイーサネット、WANプロトコルはPPPが代表的なプロトコル。イーサネットでは、セグメント上のノードに対して、自分の位置情報となる物理アドレス(MACアドレス)を割り当てることができ、ローカルでのノード間の通信が実現することになる

- TCP / IPの階層モデルにおけるカプセル化・非カプセル化  
コンピュータ間で通信する場合、送信側のコンピュータではアプリケーション層、トランスポート層、インターネット層、ネットワークインターフェース層、通信ケーブルの順番でカプセル化を行いデータが送出され、受信側では反対の順番で非カプセル化を行って送信側で付加したヘッダを取り除いていく。考え方はOSI参照モデルと同様。  
イーサネットLANにあるコンピュータがWebサイトを参照するためには、アプリケーション層ではHTTPプロトコル、トランスポート層ではTCPプロトコル、インターネット層ではIPプロトコル、ネットワークインターフェース層ではEthernetプロトコルを使用し、送信側では各層で処理されるたびに、これらのプロトコルのヘッダが付加されて送信されて、受信側では各階層でそのヘッダを取り除いている

<img width="600" alt="" src="./images/ヘッダ処理.png">
